(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["main"],{"11e9":function(t,e,a){var i=a("52a7"),s=a("4630"),n=a("6821"),r=a("6a99"),o=a("69a8"),c=a("c69a"),u=Object.getOwnPropertyDescriptor;e.f=a("9e1e")?u:function(t,e){if(t=n(t),e=r(e,!0),c)try{return u(t,e)}catch(a){}if(o(t,e))return s(!i.f.call(t,e),t[e])}},"1af6":function(t,e,a){var i=a("63b6");i(i.S,"Array",{isArray:a("9003")})},"20fd":function(t,e,a){"use strict";var i=a("d9f6"),s=a("aebd");t.exports=function(t,e,a){e in t?i.f(t,e,s(0,a)):t[e]=a}},2178:function(t,e,a){},"386d":function(t,e,a){"use strict";var i=a("cb7c"),s=a("83a1"),n=a("5f1b");a("214f")("search",1,function(t,e,a,r){return[function(a){var i=t(this),s=void 0==a?void 0:a[e];return void 0!==s?s.call(a,i):new RegExp(a)[e](String(i))},function(t){var e=r(a,t,this);if(e.done)return e.value;var o=i(t),c=String(this),u=o.lastIndex;s(u,0)||(o.lastIndex=0);var l=n(o,c);return s(o.lastIndex,u)||(o.lastIndex=u),null===l?-1:l.index}]})},"3b2b":function(t,e,a){var i=a("7726"),s=a("5dbc"),n=a("86cc").f,r=a("9093").f,o=a("aae3"),c=a("0bfb"),u=i.RegExp,l=u,d=u.prototype,h=/a/g,f=/a/g,m=new u(h)!==h;if(a("9e1e")&&(!m||a("79e5")(function(){return f[a("2b4c")("match")]=!1,u(h)!=h||u(f)==f||"/a/i"!=u(h,"i")}))){u=function(t,e){var a=this instanceof u,i=o(t),n=void 0===e;return!a&&i&&t.constructor===u&&n?t:s(m?new l(i&&!n?t.source:t,e):l((i=t instanceof u)?t.source:t,i&&n?c.call(t):e),a?this:d,u)};for(var p=function(t){t in u||n(u,t,{configurable:!0,get:function(){return l[t]},set:function(e){l[t]=e}})},g=r(l),_=0;g.length>_;)p(g[_++]);d.constructor=u,u.prototype=d,a("2aba")(i,"RegExp",u)}a("7a56")("RegExp")},"4ffd":function(t,e,a){t.exports=a.p+"assets/img/logo.e1d63897.png"},5118:function(t,e,a){(function(t){var i="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window,s=Function.prototype.apply;function n(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new n(s.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new n(s.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},a("6017"),e.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(this,a("c8ba"))},"549b":function(t,e,a){"use strict";var i=a("d864"),s=a("63b6"),n=a("241e"),r=a("b0dc"),o=a("3702"),c=a("b447"),u=a("20fd"),l=a("7cd6");s(s.S+s.F*!a("4ee1")(function(t){Array.from(t)}),"Array",{from:function(t){var e,a,s,d,h=n(t),f="function"==typeof this?this:Array,m=arguments.length,p=m>1?arguments[1]:void 0,g=void 0!==p,_=0,v=l(h);if(g&&(p=i(p,m>2?arguments[2]:void 0,2)),void 0==v||f==Array&&o(v))for(e=c(h.length),a=new f(e);e>_;_++)u(a,_,g?p(h[_],_):h[_]);else for(d=v.call(h),a=new f;!(s=d.next()).done;_++)u(a,_,g?r(d,p,[s.value,_],!0):s.value);return a.length=_,a}})},"54a1":function(t,e,a){a("6c1c"),a("1654"),t.exports=a("95d5")},"5dbc":function(t,e,a){var i=a("d3f4"),s=a("8b97").set;t.exports=function(t,e,a){var n,r=e.constructor;return r!==a&&"function"==typeof r&&(n=r.prototype)!==a.prototype&&i(n)&&s&&s(t,n),t}},6017:function(t,e,a){(function(t,e){(function(t,a){"use strict";if(!t.setImmediate){var i,s=1,n={},r=!1,o=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,"[object process]"==={}.toString.call(t.process)?f():m()?p():t.MessageChannel?g():o&&"onreadystatechange"in o.createElement("script")?_():v(),c.setImmediate=u,c.clearImmediate=l}function u(t){"function"!==typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),a=0;a<e.length;a++)e[a]=arguments[a+1];var r={callback:t,args:e};return n[s]=r,i(s),s++}function l(t){delete n[t]}function d(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(a,i);break}}function h(t){if(r)setTimeout(h,0,t);else{var e=n[t];if(e){r=!0;try{d(e)}finally{l(t),r=!1}}}}function f(){i=function(t){e.nextTick(function(){h(t)})}}function m(){if(t.postMessage&&!t.importScripts){var e=!0,a=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=a,e}}function p(){var e="setImmediate$"+Math.random()+"$",a=function(a){a.source===t&&"string"===typeof a.data&&0===a.data.indexOf(e)&&h(+a.data.slice(e.length))};t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),i=function(a){t.postMessage(e+a,"*")}}function g(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;h(e)},i=function(e){t.port2.postMessage(e)}}function _(){var t=o.documentElement;i=function(e){var a=o.createElement("script");a.onreadystatechange=function(){h(e),a.onreadystatechange=null,t.removeChild(a),a=null},t.appendChild(a)}}function v(){i=function(t){setTimeout(h,0,t)}}})("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(this,a("c8ba"),a("f28c"))},"774e":function(t,e,a){t.exports=a("d2d5")},"7f7f":function(t,e,a){var i=a("86cc").f,s=Function.prototype,n=/^\s*function ([^ (]*)/,r="name";r in s||a("9e1e")&&i(s,r,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(t){return""}}})},"7f94":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"main"},[i("el-container",[i("el-header",{staticClass:"centered"},[i("div",{staticClass:"head"},[i("div",{staticClass:"pull-left"},[i("img",{attrs:{src:a("4ffd"),alt:""}}),i("span",{staticClass:"text"},[t._v("泰斗公众号聊天系统")])]),i("div",{staticClass:"pull-right"},[i("div",{staticClass:"avatar"},[i("img",{attrs:{src:t.kfInfo.avatar,alt:""}})]),i("el-dropdown",[i("span",{staticClass:"el-dropdown-link"},[t._v("\n                "+t._s(t.kfInfo.nickname)+"\n                "),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{divided:"","split-button":""}},[i("el-tooltip",{attrs:{content:"退出登录",placement:"bottom",effect:"light"}},[i("div",{staticClass:"iconCenter",staticStyle:{"text-align":"center"},on:{click:function(e){return t.headClick(3)}}},[i("i",{staticClass:"icon iconfont icon-tuichu"})])])],1)],1)],1)],1)])]),i("el-container",[i("el-aside",{staticClass:"left",attrs:{width:"500px"}},[i("div",{staticClass:"ul_left"},[i("ul",{staticClass:"wechat-list"},t._l(t.wechatList,function(e,a){return i("li",{key:a,staticClass:"item",class:{wechatActive:t.wechatActive===e.id},on:{click:function(a){return t.openList(e)}}},[0!==e.not_read_num?i("el-badge",{staticClass:"photo",attrs:{value:e.not_read_num>99?"99+":e.not_read_num}},[i("img",{attrs:{src:e.img,alt:""}})]):i("div",{staticClass:"photo"},[i("img",{attrs:{src:e.img,alt:""}})]),i("div",{staticClass:"text"},[i("div",{staticClass:"name",attrs:{title:e.name}},[t._v(t._s(e.name))])])],1)}),0)]),i("div",{staticClass:"ul_right"},[i("div",{staticClass:"name centered"},[t._v(t._s(t.title))]),i("div",{staticClass:"input-search"},[i("el-input",{attrs:{placeholder:"昵称/备注","prefix-icon":"el-icon-search"},on:{change:t.searchChange},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.searchShow,expression:"searchShow"}],staticClass:"search"},[i("ul",{staticClass:"search-list"},[t.isSearchShow?i("li",{staticClass:"isSearch centered"},[t._v("无数据")]):t._l(t.userList,function(e,a){return i("li",{key:a,staticClass:"item",on:{click:function(a){return t.searchClick(e)}}},[i("div",{staticClass:"photo"},[i("img",{attrs:{src:e.avatar,alt:""}})]),i("div",{staticClass:"name"},[t._v(t._s(e.nickname))])])})],2)]),i("ul",{staticClass:"one-list"},t._l(t.groupList,function(e,a){return i("li",{key:a,staticClass:"one-item cursor"},[i("div",{staticClass:"title",on:{click:function(a){return t.OneChange(e)}}},[0!==e.not_read_num?i("el-badge",{staticClass:"text",attrs:{value:e.not_read_num>99?"99+":e.not_read_num}},[t._v(t._s(e.group_name)+"（"+t._s(e.count)+"个）")]):i("div",{staticClass:"text"},[t._v(t._s(e.group_name)+"（"+t._s(e.count)+"个）")]),i("div",{staticClass:"ioc"},[i("i",{directives:[{name:"show",rawName:"v-show",value:e.status,expression:"item.status"}],staticClass:"el-icon-arrow-down"}),i("i",{directives:[{name:"show",rawName:"v-show",value:!e.status,expression:"!item.status"}],staticClass:"el-icon-arrow-right"})])],1),i("el-collapse-transition",[i("ul",{directives:[{name:"show",rawName:"v-show",value:e.status,expression:"item.status"}],staticClass:"two-list"},t._l(e.userList,function(e,a){return i("li",{key:a,staticClass:"two-item",class:{bgActive:t.bgActive===e.id},on:{click:function(a){return t.chatChange(e)}}},[0!==e.not_read_num?i("el-badge",{staticClass:"avatar",attrs:{value:e.not_read_num>99?"99+":e.not_read_num}},[i("img",{attrs:{src:e.headimgurl}})]):i("div",{staticClass:"avatar"},[i("img",{attrs:{src:e.headimgurl}})]),i("div",{staticClass:"text"},[i("p",{staticClass:"nickname"},[t._v(t._s(e.nickname))]),i("p",{staticClass:"txt"},[t._v(t._s(e.last_msg))])]),i("div",{staticClass:"tubiao"},[i("div",{staticClass:"tubiao-icon shezhi",on:{click:function(a){return a.stopPropagation(),t.shezhiChange(e)}}},[i("i",{staticClass:"icon iconfont icon-shezhi"})])])],1)}),0)])],1)}),0)])]),i("el-main",[t.devShow?i("div",{staticClass:"main-contens"},[i("div",{staticClass:"nickname centered"},[t._v(t._s(t.userData.nickname))]),i("div",{staticClass:"dialogue-k"},[i("ul",{staticClass:"list"},t._l(t.chatList,function(e,a){return i("li",{key:a,staticClass:"item"},[1===e.key?i("div",{staticClass:"system"},[i("div",{staticClass:"text"},[t._v(t._s(t._f("formatDate")(e.ctime))+" "+t._s(e.content))])]):t._e(),0===e.key?i("div",{staticClass:"info"},[1===e.send_type?i("div",{staticClass:"tourist"},[i("div",{staticClass:"avatar"},[i("img",{attrs:{src:e.fans_avatar,alt:""}})]),i("div",{staticClass:"centens"},[i("div",{staticClass:"time"},[t._v(t._s(t._f("formatDate")(e.ctime)))]),1===e.msg_type?i("div",{staticClass:"text"},[t._v(t._s(e.content))]):t._e(),2===e.msg_type?i("div",{staticClass:"pull-left",staticStyle:{width:"200px"}},[i("img",{attrs:{src:e.picurl,alt:""},on:{click:function(a){return t.largeImage(e.picurl)}}})]):t._e()])]):t._e(),2===e.send_type?i("div",{staticClass:"hospital-guide"},[i("div",{staticClass:"avatar"},[i("img",{attrs:{src:e.kf_avatar,alt:""}})]),i("div",{staticClass:"centens"},[i("div",{staticClass:"time"},[t._v(t._s(t._f("formatDate")(e.ctime)))]),1===e.msg_type?i("div",{staticClass:"text"},[t._v(t._s(e.content))]):t._e(),2===e.msg_type?i("div",{staticClass:"pull-right",staticStyle:{width:"300px"}},[i("img",{staticStyle:{width:"100%"},attrs:{src:e.picurl,alt:""},on:{click:function(a){return t.largeImage(e.picurl)}}})]):t._e(),i("div",{staticClass:"pull-right"},[t._v(t._s(e.username)+"("+t._s(e.kf_nickname)+")")])])]):t._e()]):t._e()])}),0)]),i("div",{staticClass:"footer"},[i("div",{staticClass:"toolbar"},[i("ul",{staticClass:"list"},[i("li",{staticClass:"pull-left cursor file"},[i("el-upload",{attrs:{"list-type":"picture-card",action:t.uploadUrl,"before-upload":t.beforeUpload,onSuccess:t.uploadSuccess,"show-file-list":!1}},[i("i",{staticClass:"icon iconfont icon-wenjianjia"})])],1),i("li",{staticClass:"pull-left cursor"},[i("i",{staticClass:"el-icon-picture",staticStyle:{"font-size":"24px"},on:{click:t.sendQrcode}})]),i("li",{staticClass:"pull-left cursor"},[i("i",{staticClass:"icon iconfont icon-liaotian",on:{click:t.getRecord}})])])]),i("div",{staticClass:"input-text"},[i("el-input",{staticClass:"textarea",attrs:{type:"textarea",rows:4,placeholder:"请输入内容"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.formParams.content,callback:function(e){t.$set(t.formParams,"content",e)},expression:"formParams.content"}})],1),i("div",{staticClass:"btn"},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}}},[t._v("发 送")])],1)])]):t._e()]),i("el-aside",{staticClass:"right",attrs:{width:"400px"}},[i("div",{staticClass:"right-aside"},[i("div",{staticClass:"right-aside-top"},[i("ul",{staticClass:"list"},[i("li",{staticClass:"item",class:{active:1===t.rightActive},on:{click:function(e){t.rightActive=1}}},[t._v("快捷回复")]),i("li",{staticClass:"item",class:{active:2===t.rightActive},on:{click:function(e){t.rightActive=2}}},[t._v("客户资料")]),i("li",{staticClass:"item",class:{active:3===t.rightActive},on:{click:function(e){t.rightActive=3}}},[t._v("病症信息")])])]),i("div",{staticClass:"right-middle-contens"},[i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.rightActive,expression:"rightActive === 1"}],staticClass:"reply"}),i("div",{directives:[{name:"show",rawName:"v-show",value:2===t.rightActive,expression:"rightActive === 2"}],staticClass:"remark"},[t._v("用户信息")]),i("div",{directives:[{name:"show",rawName:"v-show",value:3===t.rightActive,expression:"rightActive === 3"}],staticClass:"disease"},[t._v("病症信息")])])])])],1)],1)],1),i("el-dialog",{attrs:{title:"发送图片",visible:t.imageShow,width:t.dialogWidth},on:{"update:visible":function(e){t.imageShow=e}}},[i("div",{staticClass:"image",staticStyle:{"text-align":"center"}},[i("img",{attrs:{src:t.imageUrl,alt:""}})]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.imageShow=!1}}},[t._v("返 回")]),i("el-button",{attrs:{type:"primary"},on:{click:t.imageChange}},[t._v("确 定")])],1)]),i("el-dialog",{attrs:{title:"聊天记录",visible:t.chatRecordsShow,width:"50%"},on:{"update:visible":function(e){t.chatRecordsShow=e}}},[i("div",{staticClass:"chatRecords"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.RecordsShow,expression:"RecordsShow"}],staticClass:"centered upload",on:{click:t.chatRecordsGet}},[t._v("加载更多~")]),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.RecordsShow,expression:"!RecordsShow"}],staticClass:"centered isUpload"},[t._v("无更多消息~")]),i("ul",{staticClass:"list"},t._l(t.chatRecords,function(e,a){return i("li",{key:a,staticClass:"item"},[1===e.key?i("div",{staticClass:"system"},[i("div",{staticClass:"text"},[t._v(t._s(t._f("formatDate")(e.ctime))+" "+t._s(e.content))])]):t._e(),0===e.key?i("div",{staticClass:"info"},[1===e.send_type?i("div",{staticClass:"tourist"},[i("div",{staticClass:"avatar"},[i("img",{attrs:{src:e.fans_avatar,alt:""}})]),i("div",{staticClass:"centens"},[i("div",{staticClass:"time"},[t._v(t._s(t._f("formatDate")(e.ctime)))]),1===e.msg_type?i("div",{staticClass:"text"},[t._v(t._s(e.content))]):t._e(),2===e.msg_type?i("div",{staticClass:"pull-left",staticStyle:{width:"200px"}},[i("img",{attrs:{src:e.picurl,alt:""}})]):t._e()])]):t._e(),2===e.send_type?i("div",{staticClass:"hospital-guide"},[i("div",{staticClass:"avatar"},[i("img",{attrs:{src:e.kf_avatar,alt:""}})]),i("div",{staticClass:"centens"},[i("div",{staticClass:"time"},[t._v(t._s(t._f("formatDate")(e.ctime)))]),1===e.msg_type?i("div",{staticClass:"text"},[t._v(t._s(e.content))]):t._e(),2===e.msg_type?i("div",{staticClass:"pull-right",staticStyle:{width:"300px"}},[i("img",{staticStyle:{width:"100%"},attrs:{src:e.picurl,alt:""}})]):t._e(),i("div",{staticClass:"pull-right"},[t._v(t._s(e.username)+"("+t._s(e.kf_nickname)+")")])])]):t._e()]):t._e()])}),0)])]),i("el-dialog",{attrs:{title:"设置",visible:t.setShow,width:"550px"},on:{"update:visible":function(e){t.setShow=e}}},[i("el-form",{attrs:{"label-width":"100px",model:t.userGroup}},[i("el-form-item",{attrs:{label:"* 分组"}},[i("el-select",{attrs:{clearable:"",size:"mini",placeholder:"请选择分组"},model:{value:t.userGroup.group_id,callback:function(e){t.$set(t.userGroup,"group_id",e)},expression:"userGroup.group_id"}},t._l(t.groupList,function(t){return i("el-option",{key:t.groupid,attrs:{label:t.group_name,value:t.groupid}})}),1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.setShow=!1}}},[t._v("返 回")]),i("el-button",{attrs:{type:"primary"},on:{click:t.setChange}},[t._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"查看大图",visible:t.largeImageShow,width:t.dialogWidth},on:{"update:visible":function(e){t.largeImageShow=e}}},[i("div",{staticClass:"image",staticStyle:{"text-align":"center"}},[i("img",{staticStyle:{width:"100%"},attrs:{src:t.largePicUrl,alt:""}})])])],1)},s=[],n=a("a745"),r=a.n(n);function o(t){if(r()(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}var c=a("774e"),u=a.n(c),l=a("c8bb"),d=a.n(l);function h(t){if(d()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return u()(t)}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function m(t){return o(t)||h(t)||f()}a("386d"),a("a481"),a("7f7f"),a("ac6a"),a("96cf");var p=a("3b8d"),g=a("cebc"),_=a("bd86"),v=a("2f62"),w=a("1c1e");function y(){return Object(w["a"])({url:"/v1/wechat/index/wechat_list",method:"GET"})}function C(t){return Object(w["a"])({url:"/v1/wechat/index/wechat_group?weid="+t,method:"GET"})}function b(t){return Object(w["a"])({url:"/v1/wechat/index/my_friend_list?weid="+t.weid+"&groupid="+t.groupid,method:"GET"})}function k(t){return Object(w["a"])({url:"/v1/wechat/send_msg",method:"POST",data:t})}function x(t){return Object(w["a"])({url:"v1/wechat/chat_list_slide?fans_openid="+t.fans_openid+"&direct="+t.direct+"&min_msg_id="+t.min_msg_id+"&max_msg_id="+t.max_msg_id,method:"GET",data:t})}function S(t){return Object(w["a"])({url:"/v1/wechat/send_image_wechat",method:"POST",data:t})}function L(t){return Object(w["a"])({url:"/v1/wechat/index/read_msg?fans_openid="+t.fans_openid+"&msg_id="+t.msg_id+"&weid="+t.weid,method:"GET",data:t})}function O(t){return Object(w["a"])({url:"/v1/wechat/send_pay_code",method:"POST",data:t})}function P(t){return Object(w["a"])({url:"/v1/wechat/change_group",method:"POST",data:t})}function R(){return Object(w["a"])({url:"/v1/wechat/login_out",method:"GET"})}a("3b2b");function T(t,e){/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var i in a)if(new RegExp("(".concat(i,")")).test(e)){var s=a[i]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?s:j(s))}return e}function j(t){return("00"+t).substr(t.length)}a("5118");var E={data:function(){var t;return t={kfInfo:{avatar:"",nickname:""},info:[],dialogWidth:"30%",socketData:{user_type:"yz",query_type:"head_data",user_id:""},formParams:{weid:"",fans_openid:"",msg_type:"",content:"",source_type:"",file:""},picParams:{weid:"",fans_openid:"",source_type:1,url:""},userData:"",devShow:!1,cacheData:{cache_content:"",id:"",groupid:""},rightActive:1,keyword:"",userList:[],searchShow:!1,isSearchShow:!1,title:"",wechatList:[],wechatActive:"",bgActive:"",groupList:[{group_name:"未分组",not_read_num:0,groupid:1,count:0,userList:[]},{group_name:"已接待",not_read_num:0,groupid:2,count:0,userList:[]},{group_name:"有意向",not_read_num:0,groupid:3,count:0,userList:[]},{group_name:"已成单",not_read_num:0,groupid:4,count:0,userList:[]},{group_name:"已结束",not_read_num:0,groupid:5,count:0,userList:[]},{group_name:"广告粉",not_read_num:0,groupid:6,count:0,userList:[]}],friendList:[],weid:"",params:{weid:"",groupid:""},chatParams:{fans_openid:"",direct:"",page_size:20,min_msg_id:"",max_msg_id:""},recordsParams:{fans_openid:"",direct:"",page_size:20,min_msg_id:"",max_msg_id:""},readMsgParams:{fans_openid:"",msg_id:"",weid:""},chatList:[],chatRecords:[],imageUrl:"",imageWidth:0,imageHeight:0,imageShow:!1,codeImageShow:!1,codeImageUrl:"",chatRecordsShow:!1,baseURL:"https://tdcsgzh.wuhanlst.com",uploadUrl:"",avatar:"https://cdn-statis.mangguokandian.com/avatar.png"},Object(_["a"])(t,"title",""),Object(_["a"])(t,"uploadShow",!1),Object(_["a"])(t,"RecordsShow",!1),Object(_["a"])(t,"setShow",!1),Object(_["a"])(t,"userGroup",{fans_openid:"",group_id:""}),Object(_["a"])(t,"chating",{groupid:""}),Object(_["a"])(t,"largeImageShow",!1),Object(_["a"])(t,"largePicUrl",""),t},filters:{formatDate:function(t){var e=new Date(1e3*t);return T(e,"yyyy-MM-dd hh:mm:ss")}},mounted:function(){this.getWechatList(),this.WebSocketTest(),this.uploadUrl=this.baseURL+"/v1/uploads",this.kfInfo.avatar=this.$route.query.avatar,this.kfInfo.nickname=this.$route.query.nickname},computed:Object(g["a"])({},Object(v["c"])({token:function(t){return t.token},device:function(t){return t.device}})),methods:{headClick:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(3!==e){t.next=5;break}return t.next=3,R();case 3:a=t.sent,200===a.code&&(this.$router.push("/out"),sessionStorage.clear(),window.location.reload());case 5:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),readMsg:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,L(this.readMsgParams);case 2:e=t.sent,200===e.code&&(a=e.data,this.wechatList.forEach(function(t){t.id==a.weid&&(t.not_read_num=a.we_not_read_num)}));case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getWechatList:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,y();case 2:e=t.sent,200===e.code&&(this.wechatList=e.data.wechat,this.weid=e.data.wechat[0].id,this.params.weid=this.weid,this.formParams.weid=this.weid,this.picParams.weid=this.weid,this.title=e.data.wechat[0].name,this.getGroup());case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getGroup:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(){var e,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,C(this.weid);case 2:e=t.sent,200===e.code&&(this.groupList=e.data.group_info,this.groupList.forEach(function(t){t.status=!1,a.params.groupid=t.groupid,b(a.params).then(function(e){200===e.code&&(t.userList=e.data.friend_list,t.userList.forEach(function(t){t.content=""}))})}),console.log(this.groupList));case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),openList:function(t){console.log(t),this.wechatActive=t.id,this.weid=t.id,this.params.weid=t.id,this.formParams.weid=t.id,this.picParams.weid=t.id,this.title=t.name,this.getGroup(),console.log(this.weid,"公众号id"),console.log(this.wechatList)},getChatList:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,x(this.chatParams);case 2:e=t.sent,200===e.code&&(this.chatList=e.data.list);case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),chatChange:function(t){var e=this;console.log(t),this.formParams.fans_openid=t.fans_openid,this.picParams.fans_openid=t.fans_openid,this.chatParams.fans_openid=t.fans_openid,this.readMsgParams.fans_openid=t.fans_openid,this.readMsgParams.weid=this.weid,this.readMsgParams.msg_id=0,this.readMsg(),t.not_read_num=0,this.groupList.forEach(function(t){t.not_read_num=0,t.userList.forEach(function(e){t.not_read_num+=e.not_read_num})}),this.cacheData.content=this.formParams.content,this.cacheData.groupid&&this.groupList.forEach(function(t){t.groupid===e.cacheData.groupid&&t.userList.forEach(function(t){t.id===e.cacheData.id&&(t.content=e.cacheData.content)})}),this.formParams.content=t.content,this.bgActive=t.id,this.userData=t,this.cacheData.id=t.id,this.cacheData.groupid=t.groupid,this.devShow=!0,this.chatList=[],this.getChatList(),this.scrollChange()},OneChange:function(t){t.status=!t.status,this.chating.groupid=t.groupid,this.$forceUpdate()},send:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(){var e,a,i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,k(this.formParams);case 2:e=t.sent,200===e.code&&(console.log(e),i=e.data,s={},this.formParams.content="",a={content:i.content,msg_type:i.msg_type,ctime:i.ctime,key:0,send_type:2},Object(_["a"])(a,"msg_type",1),Object(_["a"])(a,"kf_avatar",this.avatar),Object(_["a"])(a,"username",i.username),Object(_["a"])(a,"kf_nickname",i.kf_nickname),s=a,this.chatList.push(s),this.scrollChange());case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),submit:function(){""!==this.formParams.content?(this.formParams.content=this.formParams.content.replace(/\n/,""),this.formParams.msg_type=1,this.send()):this.$message({message:"请输入内容",type:"warning"})},beforeUpload:function(t){t.type;var e="image/jpg"===t.type,a="image/png"===t.type,i="image/jpeg"===t.type,s=t.size/1024/1024<=4;return e||i||a||this.$message.error("上传图片只能是 jpg,png,jpeg 格式!"),s||this.$message.error("上传图片大小不能超过 4MB!"),(e||i||a)&&s},uploadSuccess:function(t){200===t.code&&(console.log(t.data.url),this.imageUrl=t.data.url,this.imageShow=!0,this.title="发送图片")},imageChange:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(){var e,a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.picParams.url=this.imageUrl,t.next=3,S(this.picParams);case 3:e=t.sent,200===e.code&&(a=e.data,i={picurl:a.picurl,msg_type:a.msg_type,ctime:a.ctime,key:0,send_type:2,kf_avatar:this.avatar,username:a.username,kf_nickname:a.kf_nickname},this.chatList.push(i),this.imageUrl="",this.imageShow=!1,this.scrollChange());case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),searchChange:function(){var t=this;this.userList=[],""===this.keyword?this.searchShow=!1:(this.groupList.forEach(function(e){e.userList.forEach(function(e){-1!==e.nickname.search(t.keyword)&&t.userList.push({avatar:e.headimgurl,nickname:e.nickname,groupid:e.groupid,id:e.id})})}),""===this.userList?(this.searchShow=!0,this.isSearchShow=!0):(this.searchShow=!0,this.isSearchShow=!1))},searchClick:function(t){var e=this,a=t;this.groupList.forEach(function(t){t.groupid===a.groupid&&(t.status=!0,t.userList.forEach(function(t){t.id===a.id&&(e.chatChange(t),e.searchShow=!1,e.isSearchShow=!1)}))})},scrollChange:function(){setTimeout(function(){var t=document.querySelector(".dialogue-k > .list"),e=document.querySelector(".dialogue-k");setTimeout(function(){e.scrollHeight-110<=t.scrollHeight&&(e.scrollTop=t.scrollHeight)},50)},200)},sendCodeGet:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(){var e,a,i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,O({weid:this.formParams.weid,fans_openid:this.formParams.fans_openid});case 2:e=t.sent,a=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),200===e.code?(i=e.data,s={picurl:i.picurl,msg_type:i.msg_type,ctime:i.ctime,key:0,send_type:2,kf_avatar:this.avatar},this.chatList.push(s),this.scrollChange()):a.close(),a.close();case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),sendQrcode:function(){this.sendCodeGet()},getRecord:function(){this.chatRecordsShow=!0,this.recordsParams.fans_openid=this.chatParams.fans_openid,this.recordsParams.direct="",this.recordsParams.min_msg_id="",this.chatRecords=[],this.chatRecordsGet(),setTimeout(function(){var t=document.querySelector(".chatRecords");document.querySelector(".chatRecords>.list");t.scrollTop=t.scrollHeight},500)},chatRecordsGet:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(){var e,a,i,s=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,x(this.recordsParams);case 2:e=t.sent,200===e.code&&((a=this.chatRecords).unshift.apply(a,m(e.data.list)),e.data.list.length>0&&(i=e.data.list[0].id,this.recordsParams.direct=1,this.recordsParams.min_msg_id=i,x(this.recordsParams).then(function(t){200===t.code&&(t.data.list.length>0?s.RecordsShow=!0:s.RecordsShow=!1)})));case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),shezhiChange:function(t){this.setShow=!0,this.userGroup.group_id="",this.userGroup.fans_openid=t.fans_openid},setChange:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(""!==this.userGroup.group_id){t.next=3;break}return this.$message({message:"请选择分组",type:"warning"}),t.abrupt("return");case 3:return t.next=5,P(this.userGroup);case 5:e=t.sent,200===e.code&&(this.getGroup(),this.setShow=!1);case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),largeImage:function(t){this.largeImageShow=!0,this.largePicUrl=t},WebSocketTest:function(){var t=this,e=new WebSocket("ws://tdcsgzh.wuhanlst.com:11111?token="+this.token+"&device="+this.device);e.onopen=function(){},e.onmessage=function(e){var a;if(a=-1!=e.data.indexOf("{")?JSON.parse(e.data):e.data,200===a.code){var i=a.data;console.log(i),t.weid===i.weid&&(""!==t.chating.groupid?t.chating.groupid===i.groupid&&(1===i.msg_type&&t.groupList.forEach(function(e){e.groupid===t.chating.groupid&&e.userList.forEach(function(t){t.fans_openid===i.fans_openid&&(t.last_msg=i.content)})}),t.formParams.fans_openid==i.fans_openid?(t.readMsgParams.msg_id=i.msg_id,t.readMsg(),i.not_read_num=0,t.chatList.push(i),t.scrollChange()):t.formParams.fans_openid!==i.fans_openid&&(t.groupList.forEach(function(e){e.groupid===i.groupid&&e.userList.forEach(function(e){e.fans_openid==i.fans_openid&&e.fans_openid!==t.formParams.fans_openid&&(e.not_read_num=i.not_read_num)})}),console.log(t.groupList,"发送消息后"))):t.groupList.forEach(function(t){t.groupid===i.groupid&&t.userList.forEach(function(e){e.fans_openid===i.fans_openid&&(e.not_read_num=i.not_read_num),t.not_read_num+=e.not_read_num})})),t.wechatList.forEach(function(t){t.id===i.weid&&(t.not_read_num=i.wx_not_read_num)}),t.groupList.forEach(function(t){t.groupid===i.groupid&&(t.not_read_num=0,t.userList.forEach(function(e){t.not_read_num+=e.not_read_num}))})}},e.onclose=function(){}}}},I=E,A=(a("d0db"),a("2877")),M=Object(A["a"])(I,i,s,!1,null,"7e88b795",null);e["default"]=M.exports},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"8b97":function(t,e,a){var i=a("d3f4"),s=a("cb7c"),n=function(t,e){if(s(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(s){e=!0}return function(t,a){return n(t,a),e?t.__proto__=a:i(t,a),t}}({},!1):void 0),check:n}},9093:function(t,e,a){var i=a("ce10"),s=a("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,s)}},"95d5":function(t,e,a){var i=a("40c3"),s=a("5168")("iterator"),n=a("481b");t.exports=a("584a").isIterable=function(t){var e=Object(t);return void 0!==e[s]||"@@iterator"in e||n.hasOwnProperty(i(e))}},a745:function(t,e,a){t.exports=a("f410")},ac6a:function(t,e,a){for(var i=a("cadf"),s=a("0d58"),n=a("2aba"),r=a("7726"),o=a("32e9"),c=a("84f2"),u=a("2b4c"),l=u("iterator"),d=u("toStringTag"),h=c.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},m=s(f),p=0;p<m.length;p++){var g,_=m[p],v=f[_],w=r[_],y=w&&w.prototype;if(y&&(y[l]||o(y,l,h),y[d]||o(y,d,_),c[_]=h,v))for(g in i)y[g]||n(y,g,i[g],!0)}},c8bb:function(t,e,a){t.exports=a("54a1")},d0db:function(t,e,a){"use strict";var i=a("2178"),s=a.n(i);s.a},d2d5:function(t,e,a){a("1654"),a("549b"),t.exports=a("584a").Array.from},f410:function(t,e,a){a("1af6"),t.exports=a("584a").Array.isArray}}]);